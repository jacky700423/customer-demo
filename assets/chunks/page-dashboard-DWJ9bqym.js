const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/charts-mRC3tn-m.js","assets/chunks/vendor-other-DMrNeO-R.js"])))=>i.map(i=>d[i]);
import{H as Kt,r as Rt,I as Xt,J as Tt,K as Zt,L as te,M as ct,o as N,m as ee,k as se,v as ae,N as oe,c as ne,O as It,P as ie,Q as re,u as Lt,G as le,F as ce,R as de,S as $t,z as ue,T as ve,U as _e,n as fe,h as he,j as pe,V as me,b as ye,W as Ot,X as Pt,Y as ge,i as Nt}from"./ui-B8MTJjzS.js";import{b2 as w,bg as x,aY as zt,b3 as Bt,bn as qt,bo as jt,aZ as k,a_ as y,b9 as j,b1 as s,bb as b,bp as dt,bh as be,a$ as o,bc as v,b0 as d,bk as C,bl as we,b6 as J,b7 as Q,b5 as G,ba as ut,bm as ke,b8 as at}from"./vendor-other-DMrNeO-R.js";import{_ as Wt}from"./page-admin-Txqa2T3a.js";import{d as Yt,u as Se,b as Ce}from"./vendor-C-KThoNQ.js";import{d as Ft}from"./utils-nO-s2RVl.js";import{h as R,u as De}from"./page-auth-B067K4bE.js";const Ee="modulepreload",Ve=function(r){return"/customer-demo/"+r},xt={},F=function(f,m,i){let g=Promise.resolve();if(m&&m.length>0){let u=function(S){return Promise.all(S.map(D=>Promise.resolve(D).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),E=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));g=u(m.map(S=>{if(S=Ve(S),S in xt)return;xt[S]=!0;const D=S.endsWith(".css"),T=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${S}"]${T}`))return;const V=document.createElement("link");if(V.rel=D?"stylesheet":Ee,D||(V.as="script"),V.crossOrigin="",V.href=S,E&&V.setAttribute("nonce",E),document.head.appendChild(V),D)return new Promise((U,z)=>{V.addEventListener("load",U),V.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${S}`)))})}))}function l(u){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=u,window.dispatchEvent(_),!_.defaultPrevented)throw u}return g.then(u=>{for(const _ of u||[])_.status==="rejected"&&l(_.reason);return f().catch(l)})},O={getStats(){return R.get("/dashboard/stats")},getRevenueChart(r=12){return R.get("/dashboard/revenue-chart",{months:r})},getObjectStatusChart(){return R.get("/dashboard/object-status-chart")},getOpportunityFunnelChart(){return R.get("/dashboard/opportunity-funnel-chart")},getConversionFunnel(){return R.get("/dashboard/conversion-funnel")},getInvestorActivity(r=30){return R.get(`/dashboard/investor-activity?days=${r}`)},getRecentActivities(r=10){return R.get("/dashboard/recent-activities",{limit:r})},getTodoItems(){return R.get("/dashboard/todos")},getNotifications(r=5){return R.get("/dashboard/notifications",{limit:r})},markNotificationAsRead(r){return R.put(`/dashboard/notifications/${r}/read`)},getQuickStats(){return R.get("/dashboard/quick-stats")}},Ae=Yt("dashboard",()=>{const r=w(null),f=w({labels:[],datasets:[]}),m=w({labels:[],datasets:[]}),i=w([]),g=w({labels:[],datasets:[]}),l=w([]),u=w([]),_=w([]),E=w({}),S=w(!1),D=w(!1),T=x(()=>!f.value.datasets||f.value.datasets.length===0||!f.value.datasets[0]?0:f.value.datasets[0].data.reduce((e,c)=>e+c,0)),V=x(()=>{if(!f.value.datasets||f.value.datasets.length===0||!f.value.datasets[0])return 0;const e=T.value,c=f.value.datasets[0].data.length;return c>0?e/c:0}),U=x(()=>_.value.filter(e=>!e.read)),z=x(()=>u.value.filter(e=>!e.completed)),ot=x(()=>u.value.filter(e=>e.completed)),nt=x(()=>{var I,L;if(i.value.length===0)return 0;const e=((I=i.value.find(n=>n.name==="leads"))==null?void 0:I.value)||0,c=((L=i.value.find(n=>n.name==="closed"))==null?void 0:L.value)||0;return e>0?c/e*100:0}),H=async()=>{try{S.value=!0;const e=await O.getStats();return e.success&&e.data&&(r.value=e.data),e}catch(e){throw console.error("Fetch dashboard stats error:",e),e}finally{S.value=!1}},K=async(e=12)=>{try{const c=await O.getRevenueChart(e);return c.success&&c.data&&(f.value=c.data),c}catch(c){throw console.error("Fetch revenue data error:",c),c}},X=async()=>{try{const e=await O.getObjectStatusChart();return e.success&&e.data&&(m.value=e.data),e}catch(e){throw console.error("Fetch object status data error:",e),e}},B=async()=>{try{const e=await O.getConversionFunnel();return e.success&&e.data&&(i.value=Array.isArray(e.data)?e.data:[]),e}catch(e){throw console.error("Fetch conversion funnel data error:",e),e}},P=async(e=30)=>{try{const c=await O.getInvestorActivity(e);return c.success&&c.data&&(g.value=c.data),c}catch(c){throw console.error("Fetch investor activity data error:",c),c}},A=async(e=10)=>{try{const c=await O.getRecentActivities(e);return c.success&&c.data&&(l.value=c.data),c}catch(c){throw console.error("Fetch recent activities error:",c),c}},Z=async()=>{try{const e=await O.getTodoItems();return e.success&&e.data&&(u.value=e.data),e}catch(e){throw console.error("Fetch todo items error:",e),e}},q=async()=>{try{const e=await O.getNotifications();return e.success&&e.data&&(_.value=e.data),e}catch(e){throw console.error("Fetch notifications error:",e),e}},it=async e=>{try{const c=await O.markNotificationAsRead(e);if(c.success){const I=_.value.find(L=>L.id===e);I&&(I.read=!0)}return c}catch(c){throw console.error("Mark notification as read error:",c),c}},tt=async()=>{try{const e=await O.getQuickStats();return e.success&&e.data&&(E.value=e.data),e}catch(e){throw console.error("Fetch quick stats error:",e),e}},et=async()=>{try{D.value=!0,await Promise.all([H(),K(),X(),B(),P(),A(),Z(),q(),tt()])}catch(e){throw console.error("Refresh all data error:",e),e}finally{D.value=!1}};return{stats:r,revenueData:f,objectStatusData:m,conversionFunnelData:i,investorActivityData:g,recentActivities:l,todoItems:u,notifications:_,quickStats:E,loading:S,refreshing:D,totalRevenue:T,averageMonthlyRevenue:V,unreadNotifications:U,pendingTodos:z,completedTodos:ot,conversionRate:nt,fetchDashboardStats:H,fetchRevenueData:K,fetchObjectStatusData:X,fetchConversionFunnelData:B,fetchInvestorActivityData:P,fetchRecentActivities:A,fetchTodoItems:Z,fetchNotifications:q,markNotificationAsRead:it,fetchQuickStats:tt,refreshAllData:et,initDashboard:async()=>{await et()},updateTodoStatus:(e,c)=>{const I=u.value.find(L=>L.id===e);I&&(I.completed=c)},addActivity:e=>{l.value.unshift(e),l.value.length>20&&(l.value=l.value.slice(0,20))},resetState:()=>{r.value=null,f.value={labels:[],datasets:[]},m.value={labels:[],datasets:[]},i.value=[],g.value={labels:[],datasets:[]},l.value=[],u.value=[],_.value=[],E.value={}}}}),Re=Yt("ui",()=>{const r=(()=>{const i=localStorage.getItem("legacyMode");return i!==null?i==="true":String(void 0)==="true"})(),f=w(r);return{legacyMode:f,setLegacyMode:i=>{f.value=i,localStorage.setItem("legacyMode",String(i))}}}),Te={class:"chart-wrapper"},Ie={key:0,class:"chart-header"},Le={class:"chart-body"},$e=zt({__name:"ChartWrapper",props:{title:{},init:{},options:{},autoresize:{type:Boolean,default:!0}},setup(r){const f=r,m=w(null);let i,g=null;async function l(){if(!m.value)return;i=await f.init(m.value);const u=typeof f.options=="function"?f.options():f.options;i.setOption(u)}return Bt(async()=>{await qt(),await l(),f.autoresize&&i&&(g=new ResizeObserver(()=>i==null?void 0:i.resize()),g.observe(m.value))}),jt(()=>{g==null||g.disconnect(),g=null,i&&i.dispose&&i.dispose()}),jt(()=>{i&&i.dispose&&i.dispose()}),(u,_)=>(y(),k("div",Te,[r.title?(y(),k("div",Ie,[s("h3",null,b(r.title),1)])):j("",!0),s("div",Le,[dt(u.$slots,"loading",{},void 0,!0),s("div",{ref_key:"chartRef",ref:m,class:"chart-container"},null,512),dt(u.$slots,"empty",{},void 0,!0),dt(u.$slots,"error",{},void 0,!0)])]))}}),Oe=Wt($e,[["__scopeId","data-v-5852c0a6"]]);async function Pe(){const r=await F(()=>import("./charts-mRC3tn-m.js").then(l=>l.c),__vite__mapDeps([0,1])),{LineChart:f}=await F(async()=>{const{LineChart:l}=await import("./charts-mRC3tn-m.js").then(u=>u.a);return{LineChart:l}},__vite__mapDeps([0,1])),{GridComponent:m,TooltipComponent:i}=await F(async()=>{const{GridComponent:l,TooltipComponent:u}=await import("./charts-mRC3tn-m.js").then(_=>_.b);return{GridComponent:l,TooltipComponent:u}},__vite__mapDeps([0,1])),{CanvasRenderer:g}=await F(async()=>{const{CanvasRenderer:l}=await import("./charts-mRC3tn-m.js").then(u=>u.r);return{CanvasRenderer:l}},__vite__mapDeps([0,1]));return r.use([f,m,i,g]),r}async function Ne(){const r=await F(()=>import("./charts-mRC3tn-m.js").then(l=>l.c),__vite__mapDeps([0,1])),{PieChart:f}=await F(async()=>{const{PieChart:l}=await import("./charts-mRC3tn-m.js").then(u=>u.a);return{PieChart:l}},__vite__mapDeps([0,1])),{LegendComponent:m,TooltipComponent:i}=await F(async()=>{const{LegendComponent:l,TooltipComponent:u}=await import("./charts-mRC3tn-m.js").then(_=>_.b);return{LegendComponent:l,TooltipComponent:u}},__vite__mapDeps([0,1])),{CanvasRenderer:g}=await F(async()=>{const{CanvasRenderer:l}=await import("./charts-mRC3tn-m.js").then(u=>u.r);return{CanvasRenderer:l}},__vite__mapDeps([0,1]));return r.use([f,m,i,g]),r}async function je(r){return(await Pe()).init(r)}async function Fe(r){return(await Ne()).init(r)}const vt="NT$";function xe(r,f={}){const{compact:m=!1,minimumFractionDigits:i,maximumFractionDigits:g}=f;if(r==null||r===""||isNaN(Number(r)))return`${vt} 0`;const l=Number(r);if(m){const u=l/1e4,_=g??i??1;return`${vt} ${u.toFixed(_)}萬`}return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:i,maximumFractionDigits:g}).format(l)}function Me(r,f=1){const m=r/1e4;return`${vt} ${m.toFixed(f)}萬`}const Ue={class:"dashboard-page"},ze=["id"],Be={class:"page-description"},qe={key:0,class:"legacy-shortcuts"},We={class:"legacy-shortcuts-header"},Ye={class:"legacy-shortcut-content"},Je={class:"legacy-shortcut-title"},Qe={class:"legacy-shortcut-desc"},Ge={class:"order-list"},He={class:"order-left"},Ke={class:"order-title"},Xe={class:"order-actions"},Ze={class:"stats-grid","data-testid":"stats-section"},ts={class:"stat-card","data-testid":"stat-card"},es={class:"stat-icon revenue"},ss={class:"stat-content"},as={class:"stat-value","data-testid":"total-revenue"},os={class:"stat-change positive","data-testid":"revenue-growth"},ns={class:"stat-card","data-testid":"stat-card"},is={class:"stat-icon objects"},rs={class:"stat-content"},ls={class:"stat-value","data-testid":"total-objects"},cs={class:"stat-change positive","data-testid":"objects-growth"},ds={class:"stat-card","data-testid":"stat-card"},us={class:"stat-icon opportunities"},vs={class:"stat-content"},_s={class:"stat-value","data-testid":"active-opportunities"},fs={class:"stat-change neutral"},hs={class:"stat-card","data-testid":"stat-card"},ps={class:"stat-icon investors"},ms={class:"stat-content"},ys={class:"stat-value","data-testid":"total-investors"},gs={class:"stat-change positive"},bs={class:"charts-grid","data-testid":"charts-section"},ws={class:"chart-card"},ks={class:"chart-header"},Ss={class:"chart-content"},Cs={class:"chart-card"},Ds={class:"chart-content"},Es={class:"content-grid"},Vs={class:"activity-card","data-testid":"activities-section"},As={class:"card-header"},Rs={class:"activity-list"},Ts={class:"activity-content"},Is={class:"activity-title"},Ls={class:"activity-description"},$s={class:"activity-time"},Os={key:0,class:"empty-state"},Ps={class:"todo-card","data-testid":"todos-section"},Ns={class:"card-header"},js={class:"todo-list"},Fs=["data-testid"],xs={class:"todo-content"},Ms={class:"todo-title"},Us={key:0,class:"todo-due-date"},zs={key:0,class:"empty-state"},Bs={class:"notification-card","data-testid":"notifications-section"},qs={class:"card-header"},Ws={class:"notification-list"},Ys=["onClick","data-testid"],Js={class:"notification-content"},Qs={class:"notification-title"},Gs={class:"notification-message"},Hs={class:"notification-time"},Ks={key:0,class:"unread-dot"},Xs={key:0,class:"empty-state"},Mt="legacyShortcutsOrder",Ut="legacyShortcutsVisible",Zs=zt({__name:"DashboardPage",setup(r){const f=Se(),m=De(),i=Ae(),g=Re(),{t:l}=Ce(),u=[{key:"每日計畫",title:"每日計畫",path:"/dashboard",query:{focus:"daily"},desc:"查看今日待辦、通知與重點數據",icon:Kt,color:"#409eff"},{key:"物件開發",title:"物件開發",path:"/objects/dev",desc:"新增並管理物件開發",icon:Rt,color:"#67c23a"},{key:"可流通物件",title:"可流通物件",path:"/objects",query:{status:"available"},desc:"快速查看可流通物件清單",icon:Xt,color:"#e6a23c"},{key:"商機管理",title:"商機管理",path:"/opportunities",desc:"查看與維護商機進度",icon:Tt,color:"#f56c6c"},{key:"成交紀錄",title:"成交紀錄",path:"/opportunities",query:{status:"completed"},desc:"檢視已成交商機與統計",icon:Zt,color:"#909399"},{key:"績效管理",title:"績效管理",path:"/performance",desc:"檢視關鍵績效指標與趨勢",icon:te,color:"#8e44ad"},{key:"行政業務",title:"行政業務",path:"/admin",desc:"進入行政/設定相關功能",icon:ct,color:"#2ecc71"}],_=w(JSON.parse(localStorage.getItem(Mt)||"null")||u.map(n=>n.key)),E=w(!1),S=localStorage.getItem(Ut),D=w(S?new Set(JSON.parse(S)):new Set(u.map(n=>n.key))),T=x(()=>{const n=new Map(u.map(h=>[h.key,h]));return _.value.map(h=>n.get(h)).filter(Boolean).filter(h=>D.value.has(h.key))}),V=n=>D.value.has(n),U=(n,t)=>{const h=new Set(D.value);t?h.add(n):h.delete(n),D.value=h},z=n=>{if(n<=0)return;const t=_.value.slice(),h=t[n-1],p=t[n];t[n-1]=p,t[n]=h,_.value=t},ot=n=>{if(n>=_.value.length-1)return;const t=_.value.slice(),h=t[n+1],p=t[n];t[n+1]=p,t[n]=h,_.value=t},nt=()=>{localStorage.setItem(Mt,JSON.stringify(_.value)),localStorage.setItem(Ut,JSON.stringify(Array.from(D.value))),N.success(l("legacy.shortcuts.saved")),E.value=!1},H=(n,t)=>{t?f.push({path:n,query:t}):f.push(n)},K=()=>{var n,t,h,p;return{tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:((n=i.revenueData)==null?void 0:n.labels)||[]},yAxis:{type:"value",axisLabel:{formatter:M=>Me(M)}},series:[{name:"收入",type:"line",smooth:!0,data:((p=(h=(t=i.revenueData)==null?void 0:t.datasets)==null?void 0:h[0])==null?void 0:p.data)||[],itemStyle:{color:"#409eff"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.3)"},{offset:1,color:"rgba(64, 158, 255, 0.1)"}]}}}]}},X=()=>{var n;return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left"},series:[{name:"物業狀態",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:(((n=i.objectStatusData)==null?void 0:n.labels)||[]).map((t,h)=>{var p,M,W,Y;return{name:t,value:((Y=(W=(M=(p=i.objectStatusData)==null?void 0:p.datasets)==null?void 0:M[0])==null?void 0:W.data)==null?void 0:Y[h])??0}})}]}},B=w("30d"),P=w(!1),A=be({title:"",description:"",dueDate:null}),Z=n=>xe(n),q=n=>Ft(n).format("MM-DD HH:mm"),it=n=>Ft(n).format("YYYY-MM-DD"),tt=n=>({create:$t,update:ct,delete:Ot,login:Lt})[n]||ct,et=n=>({info:Nt,success:ge,warning:Pt,error:Pt})[n]||Nt,_t=()=>{N.info("跳轉到活動日誌頁面")},ft=()=>{P.value=!0},ht=()=>{if(!A.title.trim()){N.warning("請輸入待辦事項標題");return}N.success("待辦事項已添加"),P.value=!1,Object.assign(A,{title:"",description:"",dueDate:null})},pt=(n,t)=>{i.updateTodoStatus(n,t),N.success(t?"已完成":"已取消完成")},e=n=>{N.success("待辦事項已刪除")},c=async n=>{await i.markNotificationAsRead(n)},I=async()=>{const n=(i.notifications||[]).filter(t=>!t.read).map(t=>t.id);await Promise.all(n.map(t=>i.markNotificationAsRead(t))),N.success("所有通知已標記為已讀")},L=w(null);return Bt(async()=>{try{await i.initDashboard();const n=new URLSearchParams(location.search);if(L.value=n.get("focus"),await qt(),L.value==="daily"){const t=document.getElementById("daily-header");t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("focus-highlight"),setTimeout(()=>t.classList.remove("focus-highlight"),2e3))}}catch(n){console.error("初始化儀表板失敗:",n),N.error("載入儀表板數據失敗")}}),(n,t)=>{var gt,bt,wt,kt,St,Ct,Dt,Et,Vt,At;const h=ee,p=ne,M=ye,W=se,Y=ae,st=le,Jt=ce,mt=Oe,Qt=ve,yt=pe,rt=he,Gt=me,Ht=fe;return y(),k("div",Ue,[s("div",{class:"page-header",id:L.value==="daily"?"daily-header":void 0},[t[9]||(t[9]=s("h1",{class:"page-title"},"儀表板",-1)),s("p",Be,"歡迎回來，"+b((gt=v(m).user)==null?void 0:gt.name)+"！這裡是您的業務概覽",1)],8,ze),v(g).legacyMode?(y(),k("div",qe,[s("div",We,[s("h3",null,b(v(l)("legacy.shortcuts.title")),1),o(h,{size:"small",onClick:t[0]||(t[0]=we(a=>E.value=!0,["stop"])),type:"primary",link:""},{default:d(()=>[...t[10]||(t[10]=[C("排序",-1)])]),_:1})]),(y(!0),k(J,null,Q(T.value,a=>(y(),G(M,{key:a.title,class:"legacy-shortcut-card",shadow:"hover",onClick:$=>H(a.path,a.query),style:ke({borderLeft:`4px solid ${a.color}`})},{default:d(()=>[s("div",Ye,[s("div",Je,[a.icon?(y(),G(p,{key:0,class:"mr-1"},{default:d(()=>[(y(),G(ut(a.icon)))]),_:2},1024)):j("",!0),C(" "+b(a.title),1)]),s("div",Qe,b(a.desc),1)]),o(h,{type:"primary",text:""},{default:d(()=>[C(b(v(l)("legacy.shortcuts.go")),1)]),_:1})]),_:2},1032,["onClick","style"]))),128)),o(Y,{modelValue:E.value,"onUpdate:modelValue":t[2]||(t[2]=a=>E.value=a),title:v(l)("legacy.shortcuts.dialog_title"),width:"520px"},{footer:d(()=>[o(h,{onClick:t[1]||(t[1]=a=>E.value=!1)},{default:d(()=>[...t[11]||(t[11]=[C("取消",-1)])]),_:1}),o(h,{type:"primary",onClick:nt},{default:d(()=>[...t[12]||(t[12]=[C("保存",-1)])]),_:1})]),default:d(()=>[s("div",Ge,[(y(!0),k(J,null,Q(_.value,(a,$)=>(y(),k("div",{class:"order-item",key:a},[s("div",He,[o(W,{"model-value":V(a),onChange:lt=>U(a,lt)},{default:d(()=>[C(b(v(l)("legacy.shortcuts.show")),1)]),_:1},8,["model-value","onChange"]),s("span",Ke,b(a),1)]),s("div",Xe,[o(h,{size:"small",text:"",disabled:$===0,onClick:lt=>z($)},{default:d(()=>[C(b(v(l)("legacy.shortcuts.move_up")),1)]),_:1},8,["disabled","onClick"]),o(h,{size:"small",text:"",disabled:$===_.value.length-1,onClick:lt=>ot($)},{default:d(()=>[C(b(v(l)("legacy.shortcuts.move_down")),1)]),_:1},8,["disabled","onClick"])])]))),128))])]),_:1},8,["modelValue","title"])])):j("",!0),s("div",Ze,[s("div",ts,[s("div",es,[o(p,null,{default:d(()=>[o(v(oe))]),_:1})]),s("div",ss,[s("div",as,b(Z(v(i).totalRevenue)),1),t[14]||(t[14]=s("div",{class:"stat-label"},"總收入",-1)),s("div",os,[o(p,null,{default:d(()=>[o(v(Tt))]),_:1}),t[13]||(t[13]=C(" +12.5% ",-1))])])]),s("div",ns,[s("div",is,[o(p,null,{default:d(()=>[o(v(Rt))]),_:1})]),s("div",rs,[s("div",ls,b(((bt=v(i).stats)==null?void 0:bt.total_objects)||0),1),t[16]||(t[16]=s("div",{class:"stat-label"},"物業總數",-1)),s("div",cs,[o(p,null,{default:d(()=>[o(v(It))]),_:1}),t[15]||(t[15]=C(" +8 ",-1))])])]),s("div",ds,[s("div",us,[o(p,null,{default:d(()=>[o(v(ie))]),_:1})]),s("div",vs,[s("div",_s,b(((wt=v(i).stats)==null?void 0:wt.active_opportunities)||0),1),t[18]||(t[18]=s("div",{class:"stat-label"},"活躍機會",-1)),s("div",fs,[o(p,null,{default:d(()=>[o(v(re))]),_:1}),t[17]||(t[17]=C(" 0% ",-1))])])]),s("div",hs,[s("div",ps,[o(p,null,{default:d(()=>[o(v(Lt))]),_:1})]),s("div",ms,[s("div",ys,b(((kt=v(i).stats)==null?void 0:kt.total_investors)||0),1),t[20]||(t[20]=s("div",{class:"stat-label"},"投資者",-1)),s("div",gs,[o(p,null,{default:d(()=>[o(v(It))]),_:1}),t[19]||(t[19]=C(" +3 ",-1))])])])]),s("div",bs,[s("div",ws,[s("div",ks,[t[21]||(t[21]=s("h3",null,"收入趨勢",-1)),o(Jt,{modelValue:B.value,"onUpdate:modelValue":t[3]||(t[3]=a=>B.value=a),size:"small",style:{width:"120px"}},{default:d(()=>[o(st,{label:"最近7天",value:"7d"}),o(st,{label:"最近30天",value:"30d"}),o(st,{label:"最近3個月",value:"3m"}),o(st,{label:"最近1年",value:"1y"})]),_:1},8,["modelValue"])]),s("div",Ss,[o(mt,{title:v(l)("dashboard.revenue_trend"),init:v(je),options:K,"data-testid":"revenue-chart"},null,8,["title","init"])])]),s("div",Cs,[t[22]||(t[22]=s("div",{class:"chart-header"},[s("h3",null,"物業狀態分佈")],-1)),s("div",Ds,[o(mt,{title:v(l)("dashboard.object_status"),init:v(Fe),options:X,"data-testid":"object-status-chart"},null,8,["title","init"])])])]),s("div",Es,[s("div",Vs,[s("div",As,[t[24]||(t[24]=s("h3",null,"最近活動",-1)),o(h,{text:"",type:"primary",onClick:_t},{default:d(()=>[...t[23]||(t[23]=[C(" 查看全部 ",-1)])]),_:1})]),s("div",Rs,[(y(!0),k(J,null,Q((St=v(i).recentActivities)==null?void 0:St.slice(0,5),a=>(y(),k("div",{key:a.id,class:"activity-item","data-testid":"activity-item"},[s("div",{class:at(["activity-icon",a.type])},[o(p,null,{default:d(()=>[(y(),G(ut(tt(a.type))))]),_:2},1024)],2),s("div",Ts,[s("div",Is,b(a.title),1),s("div",Ls,b(a.description),1),s("div",$s,b(q(a.created_at)),1)])]))),128)),(Ct=v(i).recentActivities)!=null&&Ct.length?j("",!0):(y(),k("div",Os,[o(p,null,{default:d(()=>[o(v(de))]),_:1}),t[25]||(t[25]=s("p",null,"暫無活動記錄",-1))]))])]),s("div",Ps,[s("div",Ns,[t[27]||(t[27]=s("h3",null,"待辦事項",-1)),o(h,{text:"",type:"primary",onClick:ft,"data-testid":"add-todo-button"},{default:d(()=>[o(p,null,{default:d(()=>[o(v($t))]),_:1}),t[26]||(t[26]=C(" 添加 ",-1))]),_:1})]),s("div",js,[(y(!0),k(J,null,Q((Dt=v(i).todoItems)==null?void 0:Dt.slice(0,5),a=>(y(),k("div",{key:a.id,class:at(["todo-item",{completed:a.completed}]),"data-testid":`todo-item-${a.id}`},[o(W,{modelValue:a.completed,"onUpdate:modelValue":$=>a.completed=$,onChange:$=>pt(a.id,a.completed),"data-testid":`todo-checkbox-${a.id}`},null,8,["modelValue","onUpdate:modelValue","onChange","data-testid"]),s("div",xs,[s("div",Ms,b(a.title),1),a.dueDate?(y(),k("div",Us," 到期："+b(it(a.dueDate)),1)):j("",!0)]),o(h,{text:"",type:"danger",size:"small",onClick:$=>e(a.id)},{default:d(()=>[o(p,null,{default:d(()=>[o(v(Ot))]),_:1})]),_:1},8,["onClick"])],10,Fs))),128)),(Et=v(i).todoItems)!=null&&Et.length?j("",!0):(y(),k("div",zs,[o(p,null,{default:d(()=>[o(v(ue))]),_:1}),t[28]||(t[28]=s("p",null,"暫無待辦事項",-1))]))])]),s("div",Bs,[s("div",qs,[t[30]||(t[30]=s("h3",null,"系統通知",-1)),o(Qt,{value:v(i).unreadNotifications,hidden:!v(i).unreadNotifications},{default:d(()=>[o(h,{text:"",type:"primary",onClick:I},{default:d(()=>[...t[29]||(t[29]=[C(" 全部已讀 ",-1)])]),_:1})]),_:1},8,["value","hidden"])]),s("div",Ws,[(y(!0),k(J,null,Q((Vt=v(i).notifications)==null?void 0:Vt.slice(0,5),a=>(y(),k("div",{key:a.id,class:at(["notification-item",{unread:!a.read}]),onClick:$=>c(a.id),"data-testid":`notification-item-${a.id}`},[s("div",{class:at(["notification-icon",a.type])},[o(p,null,{default:d(()=>[(y(),G(ut(et(a.type))))]),_:2},1024)],2),s("div",Js,[s("div",Qs,b(a.title),1),s("div",Gs,b(a.message),1),s("div",Hs,b(q(a.created_at)),1)]),a.read?j("",!0):(y(),k("div",Ks))],10,Ys))),128)),(At=v(i).notifications)!=null&&At.length?j("",!0):(y(),k("div",Xs,[o(p,null,{default:d(()=>[o(v(_e))]),_:1}),t[31]||(t[31]=s("p",null,"暫無通知",-1))]))])])]),o(Y,{modelValue:P.value,"onUpdate:modelValue":t[8]||(t[8]=a=>P.value=a),title:"添加待辦事項",width:"400px","data-testid":"add-todo-dialog"},{footer:d(()=>[o(h,{onClick:t[7]||(t[7]=a=>P.value=!1)},{default:d(()=>[...t[32]||(t[32]=[C("取消",-1)])]),_:1}),o(h,{type:"primary",onClick:ht,"data-testid":"submit-todo-button"},{default:d(()=>[...t[33]||(t[33]=[C("保存",-1)])]),_:1})]),default:d(()=>[o(Ht,{model:A,"label-width":"80px"},{default:d(()=>[o(rt,{label:"標題",required:""},{default:d(()=>[o(yt,{modelValue:A.title,"onUpdate:modelValue":t[4]||(t[4]=a=>A.title=a),name:"title",placeholder:"請輸入待辦事項標題"},null,8,["modelValue"])]),_:1}),o(rt,{label:"描述"},{default:d(()=>[o(yt,{modelValue:A.description,"onUpdate:modelValue":t[5]||(t[5]=a=>A.description=a),type:"textarea",rows:3,placeholder:"請輸入描述（可選）"},null,8,["modelValue"])]),_:1}),o(rt,{label:"到期日期"},{default:d(()=>[o(Gt,{modelValue:A.dueDate,"onUpdate:modelValue":t[6]||(t[6]=a=>A.dueDate=a),type:"date",placeholder:"選擇到期日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ta=Wt(Zs,[["__scopeId","data-v-55767d63"]]),ra=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"}));export{ra as D,F as _,Re as a,xe as f,Ae as u};
