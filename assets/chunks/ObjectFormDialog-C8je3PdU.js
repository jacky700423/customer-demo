import{n as D,h as I,j as U,F as N,G as O,m as S,v as R,o as G}from"./ui-B8MTJjzS.js";import{b as M}from"./vendor-C-KThoNQ.js";import{aY as T,b2 as _,bg as V,br as Y,b5 as $,a_ as z,b0 as r,a$ as a,bc as l,b1 as A,bk as h,bb as E}from"./vendor-other-DMrNeO-R.js";import{_ as H}from"./page-admin-Txqa2T3a.js";import"./utils-nO-s2RVl.js";const J={class:"dialog-footer"},K=T({__name:"ObjectFormDialog",props:{modelValue:{type:Boolean},data:{default:null}},emits:["update:modelValue","submit"],setup(x,{emit:F}){const{t:e}=M(),n=x,v=F,u=_(),i=_(!1),p=V({get:()=>n.modelValue,set:o=>v("update:modelValue",o)}),m=V(()=>{var o;return!!((o=n.data)!=null&&o.id)}),s=_({name:"",description:"",type:""}),k={name:[{required:!0,message:e("objects.form.rules.name_required"),trigger:"blur"}],type:[{required:!0,message:e("objects.form.rules.type_required"),trigger:"change"}]},b=()=>{p.value=!1,g()},g=()=>{var o;s.value={name:"",description:"",type:""},(o=u.value)==null||o.clearValidate()},C=async()=>{var o;if(u.value)try{await u.value.validate(),i.value=!0;const t={...s.value};m.value&&((o=n.data)!=null&&o.id)&&(t.id=n.data.id),v("submit",t),G.success(m.value?e("objects.form.success.updated"):e("objects.form.success.created")),b()}catch(t){console.error("Form validation failed:",t)}finally{i.value=!1}};return Y(()=>n.data,o=>{o?s.value={...o}:g()},{immediate:!0}),(o,t)=>{const y=U,f=I,c=O,w=N,B=D,j=S,q=R;return z(),$(q,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=d=>p.value=d),title:m.value?l(e)("objects.form.dialog_title_edit"):l(e)("objects.form.dialog_title_create"),width:"600px",onClose:b},{footer:r(()=>[A("div",J,[a(j,{onClick:b},{default:r(()=>[h(E(l(e)("common.cancel")),1)]),_:1}),a(j,{type:"primary",onClick:C,loading:i.value},{default:r(()=>[h(E(m.value?l(e)("objects.form.submit_edit"):l(e)("objects.form.submit_create")),1)]),_:1},8,["loading"])])]),default:r(()=>[a(B,{ref_key:"formRef",ref:u,model:s.value,rules:k,"label-width":"100px"},{default:r(()=>[a(f,{label:l(e)("objects.form.name"),prop:"name"},{default:r(()=>[a(y,{modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.value.name=d),placeholder:l(e)("objects.form.name_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,{label:l(e)("objects.form.description"),prop:"description"},{default:r(()=>[a(y,{modelValue:s.value.description,"onUpdate:modelValue":t[1]||(t[1]=d=>s.value.description=d),type:"textarea",rows:3,placeholder:l(e)("objects.form.description_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(f,{label:l(e)("objects.form.type"),prop:"type"},{default:r(()=>[a(w,{modelValue:s.value.type,"onUpdate:modelValue":t[2]||(t[2]=d=>s.value.type=d),placeholder:l(e)("objects.form.type_placeholder")},{default:r(()=>[a(c,{label:l(e)("objects.types.document"),value:"document"},null,8,["label"]),a(c,{label:l(e)("objects.types.image"),value:"image"},null,8,["label"]),a(c,{label:l(e)("objects.types.video"),value:"video"},null,8,["label"]),a(c,{label:l(e)("objects.types.other"),value:"other"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Z=H(K,[["__scopeId","data-v-48ad9a9d"]]);export{Z as default};
