import{c as tt,aa as xt,m as ue,S as Ke,aT as Ct,b as pe,n as qe,h as Re,j as ke,a5 as je,F as $e,G as Oe,C as ze,D as Te,J as et,z as kt,N as $t,aU as Ot,ao as at,ad as st,s as zt,ae as Se,ac as Ne,ap as lt,u as Tt,t as St,aV as Pt,aW as Be,aX as Dt,V as Mt,aM as ot,aQ as nt,aR as rt,ay as At,aY as it,aZ as ut,a_ as Ut,o as ae,a2 as Et}from"./ui-B8MTJjzS.js";import{d as Ft,u as de,b as ye,a as Pe}from"./vendor-C-KThoNQ.js";import{h as Z,a as Lt,t as Ie,e as jt}from"./page-auth-B067K4bE.js";import{b2 as j,bg as J,aY as ce,b3 as me,aZ as G,a_ as $,b1 as l,a$ as e,bb as o,bc as a,b5 as R,b9 as H,b0 as t,bk as p,bs as Ve,bh as ge,b6 as xe,b7 as Ce}from"./vendor-other-DMrNeO-R.js";import{u as qt}from"./page-objects-Dqj_-ack.js";import{u as he}from"./page-files-Cwuz-WAk.js";import{d as Rt}from"./utils-nO-s2RVl.js";import{f as oe}from"./page-dashboard-DWJ9bqym.js";import{_ as _e}from"./page-admin-Txqa2T3a.js";const Q={getOpportunities(u){return Z.get("/opportunities",u)},getOpportunity(u){return Z.get(`/opportunities/${u}`)},createOpportunity(u){return Z.post("/opportunities",u)},updateOpportunity(u,c){return Z.put(`/opportunities/${u}`,c)},deleteOpportunity(u){return Z.delete(`/opportunities/${u}`)},batchUpdateStatus(u,c){return Z.post("/opportunities/batch-update-status",{ids:u,status:c})},getOpportunityStats(){return Z.get("/opportunities/stats")},getOpportunityTimeline(u){return Z.get(`/opportunities/${u}/timeline`)},addOpportunityNote(u,c){return Z.post(`/opportunities/${u}/notes`,{note:c})},getInvestor(u){return fe.getInvestor(u)},createInvestor(u){return fe.createInvestor(u)},updateInvestor(u,c){return fe.updateInvestor(u,c)},deleteInvestor(u){return fe.deleteInvestor(u)},getInvestors(u){return fe.getInvestors(u)},batchUpdateOpportunities(u,c){return Z.post("/opportunities/batch-update",{ids:u,data:c})},batchDeleteOpportunities(u){return Z.post("/opportunities/batch-delete",{ids:u})}},fe={getInvestors(u){return Z.get("/investors",u)},getInvestor(u){return Z.get(`/investors/${u}`)},createInvestor(u){return Z.post("/investors",u)},updateInvestor(u,c){return Z.put(`/investors/${u}`,c)},deleteInvestor(u){return Z.delete(`/investors/${u}`)},getInvestorStats(){return Z.get("/investors/stats")},getInvestorOpportunities(u){return Z.get(`/investors/${u}/opportunities`)}},Nt=Ft("opportunities",()=>{const u=j([]),c=j(null),r=j([]),k=j(null),A=j({current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}),_=j(!1),E=J(()=>u.value.filter(n=>n.status==="in_progress")),I=J(()=>u.value.filter(n=>n.status==="completed"||n.status==="cancelled")),h=J(()=>u.value.reduce((n,s)=>n+s.estimated_value,0)),v=J(()=>u.value.length>0?h.value/u.value.length:0),N=J(()=>r.value.filter(n=>n.status==="active")),B=J(()=>r.value.reduce((n,s)=>n+s.available_capital,0));return{opportunities:u,currentOpportunity:c,investors:r,currentInvestor:k,pagination:A,loading:_,activeOpportunities:E,closedOpportunities:I,totalOpportunityValue:h,averageOpportunityValue:v,activeInvestors:N,totalInvestorCapital:B,fetchOpportunities:async n=>{try{_.value=!0;const s=await Q.getOpportunities(n);return s.success&&s.data&&(u.value=s.data.data,A.value={current_page:s.data.current_page,last_page:s.data.last_page,per_page:s.data.per_page,total:s.data.total,from:s.data.from,to:s.data.to}),s}catch(s){throw console.error("Fetch opportunities error:",s),s}finally{_.value=!1}},fetchOpportunity:async n=>{try{_.value=!0;const s=await Q.getOpportunity(n);if(s.success&&s.data){c.value=s.data;const C=u.value.findIndex(y=>y.id===n);C!==-1&&(u.value[C]=s.data)}return s}catch(s){throw console.error("Fetch opportunity error:",s),s}finally{_.value=!1}},createOpportunity:async n=>{try{_.value=!0;const s=await Q.createOpportunity(n);return s.success&&s.data&&(u.value.unshift(s.data),A.value.total+=1),s}catch(s){throw console.error("Create opportunity error:",s),s}finally{_.value=!1}},updateOpportunity:async(n,s)=>{var C;try{_.value=!0;const y=await Q.updateOpportunity(n,s);if(y.success&&y.data){const D=u.value.findIndex(M=>M.id===n);D!==-1&&(u.value[D]=y.data),((C=c.value)==null?void 0:C.id)===n&&(c.value=y.data)}return y}catch(y){throw console.error("Update opportunity error:",y),y}finally{_.value=!1}},deleteOpportunity:async n=>{var s;try{_.value=!0;const C=await Q.deleteOpportunity(n);return C.success&&(u.value=u.value.filter(y=>y.id!==n),A.value.total-=1,((s=c.value)==null?void 0:s.id)===n&&(c.value=null)),C}catch(C){throw console.error("Delete opportunity error:",C),C}finally{_.value=!1}},batchUpdateOpportunities:async(n,s)=>{try{_.value=!0;const C=await Q.batchUpdateOpportunities(n,s);return C.success&&(u.value=u.value.map(y=>n.includes(y.id)?{...y,...s}:y)),C}catch(C){throw console.error("Batch update opportunities error:",C),C}finally{_.value=!1}},batchDeleteOpportunities:async n=>{try{_.value=!0;const s=await Q.batchDeleteOpportunities(n);return s.success&&(u.value=u.value.filter(C=>!n.includes(C.id)),A.value.total-=n.length),s}catch(s){throw console.error("Batch delete opportunities error:",s),s}finally{_.value=!1}},addOpportunityNote:async(n,s)=>{var C;try{const y=await Q.addOpportunityNote(n,s);if(y.success&&y.data){const D=u.value.findIndex(M=>M.id===n);if(D!==-1&&u.value[D]){const M=u.value[D].notes;u.value[D].notes=M?`${M}
${y.data.content||y.data}`:y.data.content||y.data}if(((C=c.value)==null?void 0:C.id)===n){const M=c.value.notes;c.value.notes=M?`${M}
${y.data.content||y.data}`:y.data.content||y.data}}return y}catch(y){throw console.error("Add opportunity note error:",y),y}},fetchInvestors:async n=>{try{_.value=!0;const s=await Q.getInvestors(n);return s.success&&s.data&&(r.value=s.data.data),s}catch(s){throw console.error("Fetch investors error:",s),s}finally{_.value=!1}},fetchInvestor:async n=>{try{_.value=!0;const s=await Q.getInvestor(n);if(s.success&&s.data){k.value=s.data;const C=r.value.findIndex(y=>y.id===n);C!==-1&&(r.value[C]=s.data)}return s}catch(s){throw console.error("Fetch investor error:",s),s}finally{_.value=!1}},createInvestor:async n=>{try{_.value=!0;const s=await Q.createInvestor(n);return s.success&&s.data&&r.value.unshift(s.data),s}catch(s){throw console.error("Create investor error:",s),s}finally{_.value=!1}},updateInvestor:async(n,s)=>{var C;try{_.value=!0;const y=await Q.updateInvestor(n,s);if(y.success&&y.data){const D=r.value.findIndex(M=>M.id===n);D!==-1&&(r.value[D]=y.data),((C=k.value)==null?void 0:C.id)===n&&(k.value=y.data)}return y}catch(y){throw console.error("Update investor error:",y),y}finally{_.value=!1}},deleteInvestor:async n=>{var s;try{_.value=!0;const C=await Q.deleteInvestor(n);return C.success&&(r.value=r.value.filter(y=>y.id!==n),((s=k.value)==null?void 0:s.id)===n&&(k.value=null)),C}catch(C){throw console.error("Delete investor error:",C),C}finally{_.value=!1}},resetState:()=>{u.value=[],c.value=null,r.value=[],k.value=null,A.value={current_page:1,last_page:1,per_page:15,total:0,from:0,to:0}}}}),Bt={class:"opportunity-list-page"},Yt={class:"page-header"},Zt={class:"header-left"},Wt={class:"page-title"},Gt={class:"page-subtitle"},Ht={class:"header-actions"},Jt={class:"filter-section"},Qt={class:"stats-section"},Xt={class:"stat-content"},Kt={class:"stat-value"},ea={class:"stat-label"},ta={class:"stat-icon"},aa={class:"stat-content"},sa={class:"stat-value"},la={class:"stat-label"},oa={class:"stat-icon active"},na={class:"stat-content"},ra={class:"stat-value"},ia={class:"stat-label"},ua={class:"stat-icon value"},pa={class:"stat-content"},da={class:"stat-value"},ca={class:"stat-label"},ma={class:"stat-icon average"},_a={class:"content-section"},va={class:"card-header"},fa={class:"header-actions"},ga={class:"opportunity-title"},ya={class:"opportunity-description"},ha={class:"amount"},ba={class:"return-rate"},wa={class:"pagination-container"},Ia={class:"filter-section"},Va={class:"stats-section"},xa={class:"stat-content"},Ca={class:"stat-value"},ka={class:"stat-icon"},$a={class:"stat-content"},Oa={class:"stat-value"},za={class:"stat-icon active"},Ta={class:"stat-content"},Sa={class:"stat-value"},Pa={class:"stat-icon value"},Da={class:"stat-content"},Ma={class:"stat-value"},Aa={class:"stat-icon average"},Ua={class:"content-section"},Ea={class:"card-header"},Fa={class:"header-actions"},La={class:"investor-info"},ja={class:"investor-details"},qa={class:"investor-name"},Ra={class:"investor-company"},Na={class:"amount"},Ba={class:"pagination-container"},Ya=ce({__name:"OpportunitiesListPage",setup(u){const c=de(),r=Nt(),k=Lt(),{confirmDelete:A}=qt(),{canCreate:_,canEdit:E,canDelete:I}=he(),{t:h}=ye(),v=j("opportunities"),N=j([]),B=j(!1),q=j({search:"",status:"",minAmount:"",maxAmount:""}),L=j({search:"",type:"",minCapital:"",maxCapital:""}),U=j({page:1,size:20,total:0}),O=j({page:1,size:20,total:0}),m=J(()=>r.opportunities),P=J(()=>r.investors),V=J(()=>r.loading),w=J(()=>r.loading),b=J(()=>({total:m.value.length,active:m.value.filter(g=>g.status==="in_progress").length,totalValue:m.value.reduce((g,i)=>g+(i.estimated_value||0),0),averageValue:m.value.length>0?m.value.reduce((g,i)=>g+(i.estimated_value||0),0)/m.value.length:0})),T=J(()=>({total:P.value.length,active:P.value.filter(g=>g.status==="active").length,totalCapital:P.value.reduce((g,i)=>g+(i.investment_capacity||0),0),averageCapital:P.value.length>0?P.value.reduce((g,i)=>g+(i.investment_capacity||0),0)/P.value.length:0})),x=g=>{g==="opportunities"?F():g==="investors"&&f()},F=async()=>{B.value=!0;try{await r.fetchOpportunities({page:U.value.page,size:U.value.size,...q.value})}catch(g){console.error("獲取機會列表失敗:",g),k.error(h("opps.messages.load_failed"),h("errors.toast_title"))}finally{B.value=!1}},f=async()=>{B.value=!0;try{await r.fetchInvestors({page:O.value.page,size:O.value.size,...L.value})}catch(g){console.error("獲取投資者列表失敗:",g),k.error(h("investors.messages.load_failed"),h("errors.toast_title"))}finally{B.value=!1}};let z;const n=()=>{U.value.page=1,clearTimeout(z),z=setTimeout(()=>{F()},300)},s=()=>{U.value.page=1,F()},C=()=>{q.value={search:"",status:"",minAmount:"",maxAmount:""},F()};let y;const D=()=>{O.value.page=1,clearTimeout(y),y=setTimeout(()=>{f()},300)},M=()=>{O.value.page=1,f()},De=()=>{L.value={search:"",type:"",minCapital:"",maxCapital:""},f()},Me=g=>{N.value=g},te=g=>{U.value.page=g,F()},ve=g=>{U.value.size=g,U.value.page=1,F()},Ae=g=>{O.value.page=g,f()},Ue=g=>{O.value.size=g,O.value.page=1,f()},Ee=()=>{c.push("/opportunities/create")},be=g=>{c.push(`/opportunities/${g}`)},Fe=g=>{c.push(`/opportunities/${g}/edit`)},S=async g=>{if(await A(h("opps.messages.confirm_delete_one")))try{await r.deleteOpportunity(Number(g)),k.success(h("opps.messages.delete_success")),F()}catch(Y){console.error("機會刪除失敗:",Y),k.error(h("opps.messages.delete_failed"),h("errors.toast_title"))}},ne=async()=>{if(N.value.length===0){k.warning(h("opps.messages.batch_select_first"));return}if(await A(`確定要刪除選中的 ${N.value.length} 個投資機會嗎？`))try{const i=N.value.map(Y=>Y.id);await r.batchDeleteOpportunities(i),k.success(h("common.batch_delete_success")),N.value=[],F()}catch(i){console.error("批量刪除失敗:",i),k.error("批量刪除失敗","操作失敗")}},pt=()=>{c.push("/investors/create")},dt=g=>{c.push(`/investors/${g}`)},ct=g=>{c.push(`/investors/${g}/edit`)},mt=async g=>{if(await A("確定要刪除這個投資者嗎？"))try{await r.deleteInvestor(Number(g)),k.success("投資者刪除成功"),f()}catch(Y){console.error("投資者刪除失敗:",Y),k.error("投資者刪除失敗","操作失敗")}},_t=()=>{try{k.info("導出功能開發中...","功能提示")}catch{k.error("導出失敗","操作失敗")}},vt=g=>({active:"success",closed:"info",paused:"warning"})[g]||"info",ft=g=>({active:"活躍",closed:"已關閉",paused:"暫停"})[g]||"未知",gt=g=>({low:"success",medium:"warning",high:"danger"})[g]||"info",yt=g=>({low:"低風險",medium:"中風險",high:"高風險"})[g]||"未知",ht=g=>({individual:"primary",institution:"success",fund:"warning"})[g]||"info",bt=g=>({individual:"個人",institution:"機構",fund:"基金"})[g]||"未知",we=g=>Rt(g).format("YYYY-MM-DD");return me(()=>{F()}),(g,i)=>{const Y=tt,X=ue,re=ke,se=Re,ie=Oe,Ye=$e,Ze=qe,K=pe,le=Te,We=ze,W=st,wt=zt,Le=Se,Ge=at,He=lt,Je=Ct,It=Be,Vt=Dt,Qe=Ne;return $(),G("div",Bt,[l("div",Yt,[l("div",Zt,[l("h1",Wt,o(a(h)("opps.title")),1),l("div",Gt,o(a(h)("opps.subtitle")),1)]),l("div",Ht,[e(X,{onClick:_t},{default:t(()=>[e(Y,null,{default:t(()=>[e(a(xt))]),_:1}),p(" "+o(a(h)("common.export")),1)]),_:1}),a(_)("opportunities")?($(),R(X,{key:0,type:"primary",onClick:Ee},{default:t(()=>[e(Y,null,{default:t(()=>[e(a(Ke))]),_:1}),p(" "+o(a(h)("opps.create")),1)]),_:1})):H("",!0)])]),e(Vt,{modelValue:v.value,"onUpdate:modelValue":i[12]||(i[12]=d=>v.value=d),class:"main-tabs",onTabChange:x},{default:t(()=>[e(Je,{label:"投資機會",name:"opportunities"},{default:t(()=>[l("div",Jt,[e(K,{shadow:"never"},{default:t(()=>[e(Ze,{model:q.value,inline:""},{default:t(()=>[e(se,{label:"搜索"},{default:t(()=>[e(re,{modelValue:q.value.search,"onUpdate:modelValue":i[0]||(i[0]=d=>q.value.search=d),placeholder:a(h)("opps.search_placeholder"),style:{width:"200px"},clearable:"",onInput:n},{prefix:t(()=>[e(Y,null,{default:t(()=>[e(a(je))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(se,{label:"狀態"},{default:t(()=>[e(Ye,{modelValue:q.value.status,"onUpdate:modelValue":i[1]||(i[1]=d=>q.value.status=d),placeholder:a(h)("common.select_status"),style:{width:"120px"},clearable:"",onChange:s},{default:t(()=>[e(ie,{label:a(h)("opps.status.active"),value:"active"},null,8,["label"]),e(ie,{label:a(h)("opps.status.closed"),value:"closed"},null,8,["label"]),e(ie,{label:a(h)("opps.status.paused"),value:"paused"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),e(se,{label:"投資金額"},{default:t(()=>[e(re,{modelValue:q.value.minAmount,"onUpdate:modelValue":i[2]||(i[2]=d=>q.value.minAmount=d),placeholder:"最小金額",style:{width:"120px"},type:"number",onInput:s},null,8,["modelValue"]),i[13]||(i[13]=l("span",{style:{margin:"0 8px"}},"-",-1)),e(re,{modelValue:q.value.maxAmount,"onUpdate:modelValue":i[3]||(i[3]=d=>q.value.maxAmount=d),placeholder:"最大金額",style:{width:"120px"},type:"number",onInput:s},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(X,{onClick:C},{default:t(()=>[...i[14]||(i[14]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),l("div",Qt,[e(We,{gutter:16},{default:t(()=>[e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",Xt,[l("div",Kt,o(b.value.total),1),l("div",ea,o(a(h)("opps.stats.total")),1)]),l("div",ta,[e(Y,null,{default:t(()=>[e(a(et))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",aa,[l("div",sa,o(b.value.active),1),l("div",la,o(a(h)("opps.stats.active")),1)]),l("div",oa,[e(Y,null,{default:t(()=>[e(a(kt))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",na,[l("div",ra,o(a(oe)(b.value.totalValue)),1),l("div",ia,o(a(h)("opps.stats.total_value")),1)]),l("div",ua,[e(Y,null,{default:t(()=>[e(a($t))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",pa,[l("div",da,o(a(oe)(b.value.averageValue)),1),l("div",ca,o(a(h)("opps.stats.avg_value")),1)]),l("div",ma,[e(Y,null,{default:t(()=>[e(a(Ot))]),_:1})])]),_:1})]),_:1})]),_:1})]),l("div",_a,[e(K,{shadow:"never"},{header:t(()=>[l("div",va,[l("span",null,o(a(h)("opps.list_title")),1),l("div",fa,[N.value.length>0&&a(I)("opportunities")?($(),R(X,{key:0,type:"danger",size:"small",onClick:ne},{default:t(()=>[p(" 批量刪除 ("+o(N.value.length)+") ",1)]),_:1})):H("",!0)])])]),default:t(()=>[Ve(($(),R(Ge,{data:m.value,onSelectionChange:Me,stripe:"",style:{width:"100%"}},{default:t(()=>[e(W,{type:"selection",width:"55"}),e(W,{prop:"title",label:"{{ t('opps.table.title') }}","min-width":"200"},{default:t(({row:d})=>{var ee,Xe;return[l("div",ga,[e(wt,{type:"primary",onClick:js=>be(d.id),underline:!1},{default:t(()=>[p(o(d.title),1)]),_:2},1032,["onClick"]),l("div",ya,o((ee=d.description)==null?void 0:ee.substring(0,50))+o(((Xe=d.description)==null?void 0:Xe.length)>50?"...":""),1)])]}),_:1}),e(W,{prop:"status",label:"{{ t('common.status') }}",width:"100"},{default:t(({row:d})=>[e(Le,{type:vt(d.status)},{default:t(()=>[p(o(ft(d.status)),1)]),_:2},1032,["type"])]),_:1}),e(W,{prop:"estimated_value",label:a(h)("opps.table.amount"),width:"120"},{default:t(({row:d})=>[l("span",ha,o(a(oe)(d.estimated_value)),1)]),_:1},8,["label"]),e(W,{prop:"expectedReturn",label:"{{ t('opps.table.expected_return') }}",width:"100"},{default:t(({row:d})=>[l("span",ba,o(d.expectedReturn)+"%",1)]),_:1}),e(W,{prop:"riskLevel",label:"{{ t('opps.table.risk_level') }}",width:"100"},{default:t(({row:d})=>[e(Le,{type:gt(d.riskLevel),size:"small"},{default:t(()=>[p(o(yt(d.riskLevel)),1)]),_:2},1032,["type"])]),_:1}),e(W,{prop:"deadline",label:"{{ t('common.deadline') }}",width:"120"},{default:t(({row:d})=>[p(o(we(d.deadline)),1)]),_:1}),e(W,{prop:"createdAt",label:"創建時間",width:"120"},{default:t(({row:d})=>[p(o(we(d.createdAt)),1)]),_:1}),e(W,{label:"操作",width:"150",fixed:"right"},{default:t(({row:d})=>[e(X,{type:"text",size:"small",onClick:ee=>be(d.id)},{default:t(()=>[...i[15]||(i[15]=[p(" 查看 ",-1)])]),_:1},8,["onClick"]),a(E)("opportunities")?($(),R(X,{key:0,type:"text",size:"small",onClick:ee=>Fe(d.id)},{default:t(()=>[...i[16]||(i[16]=[p(" 編輯 ",-1)])]),_:1},8,["onClick"])):H("",!0),a(I)("opportunities")?($(),R(X,{key:1,type:"text",size:"small",class:"danger-text",onClick:ee=>S(d.id)},{default:t(()=>[...i[17]||(i[17]=[p(" 刪除 ",-1)])]),_:1},8,["onClick"])):H("",!0)]),_:1})]),_:1},8,["data"])),[[Qe,V.value]]),l("div",wa,[e(He,{"current-page":U.value.page,"onUpdate:currentPage":i[4]||(i[4]=d=>U.value.page=d),"page-size":U.value.size,"onUpdate:pageSize":i[5]||(i[5]=d=>U.value.size=d),total:U.value.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:ve,onCurrentChange:te},null,8,["current-page","page-size","total"])])]),_:1})])]),_:1}),e(Je,{label:"投資者",name:"investors"},{default:t(()=>[l("div",Ia,[e(K,{shadow:"never"},{default:t(()=>[e(Ze,{model:L.value,inline:""},{default:t(()=>[e(se,{label:"搜索"},{default:t(()=>[e(re,{modelValue:L.value.search,"onUpdate:modelValue":i[6]||(i[6]=d=>L.value.search=d),placeholder:"搜索投資者姓名、公司",style:{width:"200px"},clearable:"",onInput:D},{prefix:t(()=>[e(Y,null,{default:t(()=>[e(a(je))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(se,{label:"類型"},{default:t(()=>[e(Ye,{modelValue:L.value.type,"onUpdate:modelValue":i[7]||(i[7]=d=>L.value.type=d),placeholder:"選擇類型",style:{width:"120px"},clearable:"",onChange:M},{default:t(()=>[e(ie,{label:"個人",value:"individual"}),e(ie,{label:"機構",value:"institution"}),e(ie,{label:"基金",value:"fund"})]),_:1},8,["modelValue"])]),_:1}),e(se,{label:"投資能力"},{default:t(()=>[e(re,{modelValue:L.value.minCapital,"onUpdate:modelValue":i[8]||(i[8]=d=>L.value.minCapital=d),placeholder:"最小金額",style:{width:"120px"},type:"number",onInput:M},null,8,["modelValue"]),i[18]||(i[18]=l("span",{style:{margin:"0 8px"}},"-",-1)),e(re,{modelValue:L.value.maxCapital,"onUpdate:modelValue":i[9]||(i[9]=d=>L.value.maxCapital=d),placeholder:"最大金額",style:{width:"120px"},type:"number",onInput:M},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(X,{onClick:De},{default:t(()=>[...i[19]||(i[19]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),l("div",Va,[e(We,{gutter:16},{default:t(()=>[e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",xa,[l("div",Ca,o(T.value.total),1),i[20]||(i[20]=l("div",{class:"stat-label"},"總投資者",-1))]),l("div",ka,[e(Y,null,{default:t(()=>[e(a(Tt))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",$a,[l("div",Oa,o(T.value.active),1),i[21]||(i[21]=l("div",{class:"stat-label"},"活躍投資者",-1))]),l("div",za,[e(Y,null,{default:t(()=>[e(a(St))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",Ta,[l("div",Sa,o(a(oe)(T.value.totalCapital)),1),i[22]||(i[22]=l("div",{class:"stat-label"},"總投資能力",-1))]),l("div",Pa,[e(Y,null,{default:t(()=>[e(a(Pt))]),_:1})])]),_:1})]),_:1}),e(le,{span:6},{default:t(()=>[e(K,{class:"stat-card"},{default:t(()=>[l("div",Da,[l("div",Ma,o(a(oe)(T.value.averageCapital)),1),i[23]||(i[23]=l("div",{class:"stat-label"},"平均投資能力",-1))]),l("div",Aa,[e(Y,null,{default:t(()=>[e(a(et))]),_:1})])]),_:1})]),_:1})]),_:1})]),l("div",Ua,[e(K,{shadow:"never"},{header:t(()=>[l("div",Ea,[i[25]||(i[25]=l("span",null,"投資者列表",-1)),l("div",Fa,[a(_)("investors")?($(),R(X,{key:0,type:"primary",size:"small",onClick:pt},{default:t(()=>[e(Y,null,{default:t(()=>[e(a(Ke))]),_:1}),i[24]||(i[24]=p(" 新增投資者 ",-1))]),_:1})):H("",!0)])])]),default:t(()=>[Ve(($(),R(Ge,{data:P.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(W,{prop:"name",label:"姓名/機構名","min-width":"150"},{default:t(({row:d})=>[l("div",La,[e(It,{size:32,src:d.avatar},{default:t(()=>{var ee;return[p(o((ee=d.name)==null?void 0:ee.charAt(0)),1)]}),_:2},1032,["src"]),l("div",ja,[l("div",qa,o(d.name),1),l("div",Ra,o(d.company||"個人投資者"),1)])])]),_:1}),e(W,{prop:"type",label:"類型",width:"100"},{default:t(({row:d})=>[e(Le,{type:ht(d.type),size:"small"},{default:t(()=>[p(o(bt(d.type)),1)]),_:2},1032,["type"])]),_:1}),e(W,{prop:"investment_capacity",label:"投資能力",width:"120"},{default:t(({row:d})=>[l("span",Na,o(a(oe)(d.investment_capacity)),1)]),_:1}),e(W,{prop:"phone",label:"聯繫電話",width:"130"}),e(W,{prop:"email",label:"郵箱",width:"180"}),e(W,{prop:"lastContactDate",label:"最後聯繫",width:"120"},{default:t(({row:d})=>[p(o(we(d.lastContactDate)),1)]),_:1}),e(W,{prop:"createdAt",label:"創建時間",width:"120"},{default:t(({row:d})=>[p(o(we(d.createdAt)),1)]),_:1}),e(W,{label:"操作",width:"150",fixed:"right"},{default:t(({row:d})=>[e(X,{type:"text",size:"small",onClick:ee=>dt(d.id)},{default:t(()=>[...i[26]||(i[26]=[p(" 查看 ",-1)])]),_:1},8,["onClick"]),a(E)("investors")?($(),R(X,{key:0,type:"text",size:"small",onClick:ee=>ct(d.id)},{default:t(()=>[...i[27]||(i[27]=[p(" 編輯 ",-1)])]),_:1},8,["onClick"])):H("",!0),a(I)("investors")?($(),R(X,{key:1,type:"text",size:"small",class:"danger-text",onClick:ee=>mt(d.id)},{default:t(()=>[...i[28]||(i[28]=[p(" 刪除 ",-1)])]),_:1},8,["onClick"])):H("",!0)]),_:1})]),_:1},8,["data"])),[[Qe,w.value]]),l("div",Ba,[e(He,{"current-page":O.value.page,"onUpdate:currentPage":i[10]||(i[10]=d=>O.value.page=d),"page-size":O.value.size,"onUpdate:pageSize":i[11]||(i[11]=d=>O.value.size=d),total:O.value.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ue,onCurrentChange:Ae},null,8,["current-page","page-size","total"])])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])}}}),Za=_e(Ya,[["__scopeId","data-v-62de43de"]]),Js=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"})),Wa={class:"opportunities-form-page"},Ga={class:"card-header"},Ha=ce({__name:"OpportunitiesFormPage",setup(u){const{t:c}=ye(),r=Pe(),k=de(),{canCreate:A,canEdit:_}=he(),E=j(),I=j(!1),h=J(()=>!!r.params.id),v=ge({name:"",type:"",amount:"",status:"potential",expectedDate:"",assignee:"",description:"",notes:""}),N={name:[{required:!0,message:"請輸入機會名稱",trigger:"blur"},{min:2,max:100,message:"機會名稱長度應在 2 到 100 個字符之間",trigger:"blur"}],type:[{required:!0,message:"請選擇機會類型",trigger:"change"}],amount:[{required:!0,message:"請輸入預估金額",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"請輸入有效的金額",trigger:"blur"}],status:[{required:!0,message:"請選擇機會狀態",trigger:"change"}],assignee:[{required:!0,message:"請選擇負責人",trigger:"change"}],description:[{required:!0,message:"請輸入機會描述",trigger:"blur"},{min:10,max:500,message:"機會描述長度應在 10 到 500 個字符之間",trigger:"blur"}]},B=async()=>{if(h.value)try{Object.assign(v,{name:"科技公司投資機會",type:"investment",amount:"5000",status:"in_progress",expectedDate:"2024-06-30",assignee:"zhang_san",description:"一家專注於人工智能技術的初創公司，具有很大的發展潛力。",notes:"需要進一步評估技術可行性和市場前景。"})}catch(O){console.error("載入機會數據失敗:",O),Ie.error("載入機會數據失敗","操作失敗")}},q=async()=>{if(E.value)try{await E.value.validate(),I.value=!0,await new Promise(O=>setTimeout(O,1e3)),Ie.success(h.value?"機會更新成功":"機會創建成功"),k.push("/opportunities")}catch(O){console.error("機會操作失敗:",O),Ie.error(h.value?"機會更新失敗":"機會創建失敗","操作失敗")}finally{I.value=!1}},L=()=>{E.value&&E.value.resetFields()},U=()=>{k.push("/opportunities")};return me(()=>{B()}),(O,m)=>{const P=ue,V=ke,w=Re,b=Te,T=Oe,x=$e,F=ze,f=Mt,z=qe,n=pe;return $(),G("div",Wa,[e(n,null,{header:t(()=>[l("div",Ga,[l("h2",null,o(h.value?a(c)("opps.form.edit_title"):a(c)("opps.form.create_title")),1),e(P,{onClick:U},{default:t(()=>[p(o(a(c)("common.back")),1)]),_:1})])]),default:t(()=>[e(z,{ref_key:"formRef",ref:E,model:v,rules:N,"label-width":"120px",class:"opportunity-form"},{default:t(()=>[e(F,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.name"),prop:"name"},{default:t(()=>[e(V,{modelValue:v.name,"onUpdate:modelValue":m[0]||(m[0]=s=>v.name=s),placeholder:a(c)("opps.form.name_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.type"),prop:"type"},{default:t(()=>[e(x,{modelValue:v.type,"onUpdate:modelValue":m[1]||(m[1]=s=>v.type=s),placeholder:a(c)("opps.form.type_placeholder"),style:{width:"100%"}},{default:t(()=>[e(T,{label:"投資機會",value:"investment"}),e(T,{label:"合作機會",value:"partnership"}),e(T,{label:"收購機會",value:"acquisition"}),e(T,{label:"其他",value:"other"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(F,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.amount"),prop:"amount"},{default:t(()=>[e(V,{modelValue:v.amount,"onUpdate:modelValue":m[2]||(m[2]=s=>v.amount=s),placeholder:a(c)("opps.form.amount_placeholder"),type:"number"},{append:t(()=>[p(o(a(c)("common.ten_thousand")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.status"),prop:"status"},{default:t(()=>[e(x,{modelValue:v.status,"onUpdate:modelValue":m[3]||(m[3]=s=>v.status=s),placeholder:a(c)("opps.form.status_placeholder"),style:{width:"100%"}},{default:t(()=>[e(T,{label:"潛在機會",value:"potential"}),e(T,{label:"進行中",value:"in_progress"}),e(T,{label:"已完成",value:"completed"}),e(T,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(F,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.expected_date"),prop:"expectedDate"},{default:t(()=>[e(f,{modelValue:v.expectedDate,"onUpdate:modelValue":m[4]||(m[4]=s=>v.expectedDate=s),type:"date",placeholder:a(c)("opps.form.expected_date_placeholder"),style:{width:"100%"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:a(c)("opps.form.assignee"),prop:"assignee"},{default:t(()=>[e(x,{modelValue:v.assignee,"onUpdate:modelValue":m[5]||(m[5]=s=>v.assignee=s),placeholder:a(c)("opps.form.assignee_placeholder"),style:{width:"100%"}},{default:t(()=>[e(T,{label:"張三",value:"zhang_san"}),e(T,{label:"李四",value:"li_si"}),e(T,{label:"王五",value:"wang_wu"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(w,{label:a(c)("opps.form.description"),prop:"description"},{default:t(()=>[e(V,{modelValue:v.description,"onUpdate:modelValue":m[6]||(m[6]=s=>v.description=s),type:"textarea",rows:4,placeholder:a(c)("opps.form.description_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,{label:a(c)("opps.form.notes"),prop:"notes"},{default:t(()=>[e(V,{modelValue:v.notes,"onUpdate:modelValue":m[7]||(m[7]=s=>v.notes=s),type:"textarea",rows:3,placeholder:a(c)("opps.form.notes_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(w,null,{default:t(()=>[(h.value?a(_)("opportunities"):a(A)("opportunities"))?($(),R(P,{key:0,type:"primary",loading:I.value,onClick:q},{default:t(()=>[p(o(h.value?a(c)("common.update"):a(c)("common.create")),1)]),_:1},8,["loading"])):H("",!0),e(P,{onClick:L},{default:t(()=>[p(o(a(c)("common.reset")),1)]),_:1}),e(P,{onClick:U},{default:t(()=>[p(o(a(c)("common.cancel")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),Ja=_e(Ha,[["__scopeId","data-v-6b6d5920"]]),Qs=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),Qa={class:"opportunities-detail-page"},Xa={class:"card-header"},Ka={class:"header-actions"},es={key:0,class:"loading-container"},ts={key:1,class:"opportunity-detail"},as={class:"opportunity-name"},ss={class:"amount"},ls={class:"description-section"},os={class:"description-content"},ns={key:0,class:"notes-section"},rs={class:"notes-content"},is={class:"progress-section"},us=ce({__name:"OpportunitiesDetailPage",setup(u){const c=Pe(),r=de(),{canEdit:k}=he(),A=j(!0),_=ge({id:"",name:"",type:"",amount:0,status:"",expectedDate:"",assignee:"",description:"",notes:"",createdAt:"",updatedAt:""}),E=j([{id:1,title:"機會創建",description:"機會已成功創建，等待進一步評估",timestamp:"2024-01-15 10:30:00",operator:"張三",type:"primary"},{id:2,title:"初步評估完成",description:"完成了初步的市場調研和可行性分析",timestamp:"2024-01-20 14:20:00",operator:"李四",type:"success"},{id:3,title:"進入談判階段",description:"與相關方開始正式談判",timestamp:"2024-01-25 09:15:00",operator:"王五",type:"warning"}]),I=async()=>{try{A.value=!0;const V={id:c.params.id,name:"科技公司投資機會",type:"investment",amount:5e3,status:"in_progress",expectedDate:"2024-06-30",assignee:"zhang_san",description:"一家專注於人工智能技術的初創公司，具有很大的發展潛力。該公司已經開發出了多項核心技術，並在市場上取得了初步成功。我們認為這是一個很好的投資機會，可以為我們帶來可觀的回報。",notes:"需要進一步評估技術可行性和市場前景。建議安排技術團隊進行深入的技術盡職調查。",createdAt:"2024-01-15 10:30:00",updatedAt:"2024-01-25 09:15:00"};Object.assign(_,V)}catch(V){console.error("載入機會詳情失敗:",V),Ie.error("載入機會詳情失敗","操作失敗")}finally{A.value=!1}},h=()=>{r.push(`/opportunities/${_.id}/edit`)},v=()=>{r.push("/opportunities")},N=V=>oe(V*1e4,{compact:!0}),B=V=>V?new Date(V).toLocaleString("zh-TW"):"-",q=V=>({investment:"success",partnership:"primary",acquisition:"warning",other:"info"})[V]||"info",L=V=>({investment:"投資機會",partnership:"合作機會",acquisition:"收購機會",other:"其他"})[V]||"未知",U=V=>({potential:"info",in_progress:"warning",completed:"success",cancelled:"danger"})[V]||"info",O=V=>({potential:"潛在機會",in_progress:"進行中",completed:"已完成",cancelled:"已取消"})[V]||"未知",m=V=>({zhang_san:"張三",li_si:"李四",wang_wu:"王五"})[V]||"未指定",P=V=>({zhang_san:"張",li_si:"李",wang_wu:"王"})[V]||"?";return me(()=>{I()}),(V,w)=>{const b=ue,T=ot,x=rt,F=Se,f=Be,z=nt,n=At,s=ut,C=it,y=pe;return $(),G("div",Qa,[e(y,null,{header:t(()=>[l("div",Xa,[w[2]||(w[2]=l("h2",null,"機會詳情",-1)),l("div",Ka,[a(k)("opportunities")?($(),R(b,{key:0,type:"primary",onClick:h},{default:t(()=>[...w[0]||(w[0]=[p("編輯",-1)])]),_:1})):H("",!0),e(b,{onClick:v},{default:t(()=>[...w[1]||(w[1]=[p("返回",-1)])]),_:1})])])]),default:t(()=>[A.value?($(),G("div",es,[e(T,{rows:8,animated:""})])):($(),G("div",ts,[e(z,{column:2,border:""},{default:t(()=>[e(x,{label:"機會名稱"},{default:t(()=>[l("span",as,o(_.name),1)]),_:1}),e(x,{label:"機會類型"},{default:t(()=>[e(F,{type:q(_.type)},{default:t(()=>[p(o(L(_.type)),1)]),_:1},8,["type"])]),_:1}),e(x,{label:"預估金額"},{default:t(()=>[l("span",ss,o(N(_.amount)),1)]),_:1}),e(x,{label:"機會狀態"},{default:t(()=>[e(F,{type:U(_.status)},{default:t(()=>[p(o(O(_.status)),1)]),_:1},8,["type"])]),_:1}),e(x,{label:"預計完成日期"},{default:t(()=>[p(o(B(_.expectedDate)),1)]),_:1}),e(x,{label:"負責人"},{default:t(()=>[e(f,{size:24,style:{"margin-right":"8px"}},{default:t(()=>[p(o(P(_.assignee)),1)]),_:1}),p(" "+o(m(_.assignee)),1)]),_:1}),e(x,{label:"創建時間"},{default:t(()=>[p(o(B(_.createdAt)),1)]),_:1}),e(x,{label:"更新時間"},{default:t(()=>[p(o(B(_.updatedAt)),1)]),_:1})]),_:1}),e(n),l("div",ls,[w[3]||(w[3]=l("h3",null,"機會描述",-1)),l("p",os,o(_.description),1)]),_.notes?($(),G("div",ns,[w[4]||(w[4]=l("h3",null,"備註",-1)),l("p",rs,o(_.notes),1)])):H("",!0),e(n),l("div",is,[w[5]||(w[5]=l("h3",null,"進度追蹤",-1)),e(C,null,{default:t(()=>[($(!0),G(xe,null,Ce(E.value,D=>($(),R(s,{key:D.id,timestamp:B(D.timestamp),type:D.type},{default:t(()=>[l("h4",null,o(D.title),1),l("p",null,o(D.description),1),l("small",null,"操作人："+o(D.operator),1)]),_:2},1032,["timestamp","type"]))),128))]),_:1})])]))]),_:1})])}}}),ps=_e(us,[["__scopeId","data-v-e970c0fc"]]),Xs=Object.freeze(Object.defineProperty({__proto__:null,default:ps},Symbol.toStringTag,{value:"Module"})),ds={class:"investors-list-page"},cs={class:"card-header"},ms={class:"search-section"},_s={class:"investor-info"},vs={class:"investor-name"},fs={class:"investor-company"},gs={class:"pagination-container"},ys=ce({__name:"InvestorsListPage",setup(u){const c=de(),{t:r}=ye(),k=j(!1),A=ge({keyword:"",type:"",status:""}),_=ge({currentPage:1,pageSize:20,total:0}),E=j([{id:1,name:"王大明",company:"明德投資集團",type:"institutional",investmentRange:{min:1e3,max:1e4},focusAreas:["科技","醫療","教育"],status:"active",lastContact:"2024-01-20",email:"wang@mingde.com",phone:"0912-345-678"},{id:2,name:"李小華",company:"華興創投",type:"venture_capital",investmentRange:{min:500,max:5e3},focusAreas:["人工智能","區塊鏈"],status:"active",lastContact:"2024-01-18",email:"li@huaxing.com",phone:"0987-654-321"},{id:3,name:"張三豐",company:"個人投資者",type:"individual",investmentRange:{min:100,max:1e3},focusAreas:["房地產","股票"],status:"potential",lastContact:"2024-01-15",email:"zhang@email.com",phone:"0911-222-333"}]),I=async()=>{try{k.value=!0,await new Promise(f=>setTimeout(f,500)),_.total=E.value.length}catch{ae.error("載入投資者列表失敗")}finally{k.value=!1}},h=()=>{_.currentPage=1,I()},v=()=>{Object.assign(A,{keyword:"",type:"",status:""}),h()},N=({prop:f,order:z})=>{console.log("Sort:",f,z),I()},B=f=>{_.pageSize=f,I()},q=f=>{_.currentPage=f,I()},L=()=>{c.push("/opportunities/investors/create")},U=f=>{c.push(`/opportunities/investors/${f}`)},O=f=>{c.push(`/opportunities/investors/${f}/edit`)},m=async f=>{try{await new Promise(z=>setTimeout(z,500)),ae.success("投資者刪除成功"),I()}catch{ae.error("投資者刪除失敗")}},P=f=>`${f.min}-${f.max} 萬元`,V=f=>f?new Date(f).toLocaleDateString("zh-TW"):"-",w=f=>f.charAt(0),b=f=>({individual:"primary",institutional:"success",venture_capital:"warning",private_equity:"danger"})[f]||"info",T=f=>({individual:"個人投資者",institutional:"機構投資者",venture_capital:"風險投資",private_equity:"私募股權"})[f]||"未知",x=f=>({active:"success",potential:"warning",inactive:"info"})[f]||"info",F=f=>({active:"活躍",potential:"潛在",inactive:"暫停"})[f]||"未知";return me(()=>{I()}),(f,z)=>{const n=ue,s=tt,C=ke,y=Te,D=Oe,M=$e,De=ze,Me=Be,te=st,ve=Se,Ae=Ut,Ue=at,Ee=lt,be=pe,Fe=Ne;return $(),G("div",ds,[e(be,null,{header:t(()=>[l("div",cs,[l("h2",null,o(a(r)("investors.title")),1),e(n,{type:"primary",onClick:L},{default:t(()=>[p(o(a(r)("investors.create")),1)]),_:1})])]),default:t(()=>[l("div",ms,[e(De,{gutter:20},{default:t(()=>[e(y,{span:6},{default:t(()=>[e(C,{modelValue:A.keyword,"onUpdate:modelValue":z[0]||(z[0]=S=>A.keyword=S),placeholder:a(r)("investors.filters.search_placeholder"),clearable:"",onInput:h},{prefix:t(()=>[e(s,null,{default:t(()=>[e(a(je))]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(y,{span:4},{default:t(()=>[e(M,{modelValue:A.type,"onUpdate:modelValue":z[1]||(z[1]=S=>A.type=S),placeholder:a(r)("investors.filters.type_placeholder"),clearable:"",onChange:h},{default:t(()=>[e(D,{label:a(r)("investors.types.individual"),value:"individual"},null,8,["label"]),e(D,{label:a(r)("investors.types.institutional"),value:"institutional"},null,8,["label"]),e(D,{label:a(r)("investors.types.venture_capital"),value:"venture_capital"},null,8,["label"]),e(D,{label:a(r)("investors.types.private_equity"),value:"private_equity"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),e(y,{span:4},{default:t(()=>[e(M,{modelValue:A.status,"onUpdate:modelValue":z[2]||(z[2]=S=>A.status=S),placeholder:a(r)("investors.filters.status_placeholder"),clearable:"",onChange:h},{default:t(()=>[e(D,{label:a(r)("investors.status.active"),value:"active"},null,8,["label"]),e(D,{label:a(r)("investors.status.potential"),value:"potential"},null,8,["label"]),e(D,{label:a(r)("investors.status.inactive"),value:"inactive"},null,8,["label"])]),_:1},8,["modelValue","placeholder"])]),_:1}),e(y,{span:4},{default:t(()=>[e(n,{type:"primary",onClick:h},{default:t(()=>[p(o(a(r)("common.search")),1)]),_:1}),e(n,{onClick:v},{default:t(()=>[p(o(a(r)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),Ve(($(),R(Ue,{data:E.value,stripe:"",style:{width:"100%"},onSortChange:N},{default:t(()=>[e(te,{prop:"name",label:"投資者名稱","min-width":"150"},{default:t(({row:S})=>[l("div",_s,[e(Me,{size:32,style:{"margin-right":"10px"}},{default:t(()=>[p(o(w(S.name)),1)]),_:2},1024),l("div",null,[l("div",vs,o(S.name),1),l("div",fs,o(S.company),1)])])]),_:1}),e(te,{prop:"type",label:a(r)("investors.table.type"),width:"120"},{default:t(({row:S})=>[e(ve,{type:b(S.type)},{default:t(()=>[p(o(T(S.type)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(te,{prop:"investmentRange",label:"投資範圍",width:"150"},{default:t(({row:S})=>[p(o(P(S.investmentRange)),1)]),_:1}),e(te,{prop:"focusAreas",label:"關注領域","min-width":"200"},{default:t(({row:S})=>[($(!0),G(xe,null,Ce(S.focusAreas,ne=>($(),R(ve,{key:ne,size:"small",style:{"margin-right":"5px"}},{default:t(()=>[p(o(ne),1)]),_:2},1024))),128))]),_:1}),e(te,{prop:"status",label:"狀態",width:"100"},{default:t(({row:S})=>[e(ve,{type:x(S.status)},{default:t(()=>[p(o(F(S.status)),1)]),_:2},1032,["type"])]),_:1}),e(te,{prop:"lastContact",label:"最後聯繫",width:"120",sortable:"custom"},{default:t(({row:S})=>[p(o(V(S.lastContact)),1)]),_:1}),e(te,{label:a(r)("objects.table.operations"),width:"200",fixed:"right"},{default:t(({row:S})=>[e(n,{type:"primary",size:"small",onClick:ne=>U(S.id)},{default:t(()=>[p(o(a(r)("common.view")),1)]),_:1},8,["onClick"]),e(n,{size:"small",onClick:ne=>O(S.id)},{default:t(()=>[p(o(a(r)("common.edit")),1)]),_:1},8,["onClick"]),e(Ae,{title:"確定要刪除這個投資者嗎？",onConfirm:ne=>m(S.id)},{reference:t(()=>[e(n,{type:"danger",size:"small"},{default:t(()=>[p(o(a(r)("common.delete")),1)]),_:1})]),_:1},8,["onConfirm"])]),_:1},8,["label"])]),_:1},8,["data"])),[[Fe,k.value]]),l("div",gs,[e(Ee,{"current-page":_.currentPage,"onUpdate:currentPage":z[3]||(z[3]=S=>_.currentPage=S),"page-size":_.pageSize,"onUpdate:pageSize":z[4]||(z[4]=S=>_.pageSize=S),"page-sizes":[10,20,50,100],total:_.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:q},null,8,["current-page","page-size","total"])])]),_:1})])}}}),hs=_e(ys,[["__scopeId","data-v-4a12b17b"]]),Ks=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"})),bs={class:"investors-form-page"},ws={class:"card-header"},Is=ce({__name:"InvestorsFormPage",setup(u){const c=Pe(),{t:r}=ye(),k=de(),{canCreate:A,canEdit:_}=he(),E=j(),I=j(!1),h=J(()=>!!c.params.id),v=ge({name:"",company:"",type:"",status:"active",email:"",phone:"",minInvestment:"",maxInvestment:"",focusAreas:[],investmentPreferences:"",address:"",notes:""}),N={name:[{required:!0,message:"請輸入投資者姓名",trigger:"blur"},{min:2,max:50,message:"姓名長度應在 2 到 50 個字符之間",trigger:"blur"}],company:[{required:!0,message:"請輸入公司名稱",trigger:"blur"},{min:2,max:100,message:"公司名稱長度應在 2 到 100 個字符之間",trigger:"blur"}],type:[{required:!0,message:"請選擇投資者類型",trigger:"change"}],status:[{required:!0,message:"請選擇狀態",trigger:"change"}],email:[{required:!0,message:"請輸入電子郵件",trigger:"blur"},{validator:(O,m,P)=>{jt(m)?P():P(new Error("請輸入有效的電子郵件地址"))},trigger:"blur"}],phone:[{required:!0,message:"請輸入電話號碼",trigger:"blur"},{pattern:/^[0-9-+\s()]*$/,message:"請輸入有效的電話號碼",trigger:"blur"}],minInvestment:[{required:!0,message:"請輸入最小投資金額",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"請輸入有效的金額",trigger:"blur"}],maxInvestment:[{required:!0,message:"請輸入最大投資金額",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"請輸入有效的金額",trigger:"blur"},{validator:(O,m,P)=>{v.minInvestment&&parseFloat(m)<parseFloat(v.minInvestment)?P(new Error("最大投資金額不能小於最小投資金額")):P()},trigger:"blur"}],focusAreas:[{required:!0,message:"請選擇至少一個關注領域",trigger:"change"}]},B=async()=>{if(h.value)try{Object.assign(v,{name:"王大明",company:"明德投資集團",type:"institutional",status:"active",email:"wang@mingde.com",phone:"0912-345-678",minInvestment:"1000",maxInvestment:"10000",focusAreas:["科技","醫療","教育"],investmentPreferences:"專注於早期科技公司，特別是人工智能和醫療科技領域。偏好有經驗團隊和清晰商業模式的項目。",address:"台北市信義區信義路五段7號",notes:"長期合作夥伴，決策效率高，資金充足。"})}catch{ae.error("載入投資者數據失敗")}},q=async()=>{if(E.value)try{await E.value.validate(),I.value=!0,await new Promise(O=>setTimeout(O,1e3)),ae.success(h.value?"投資者更新成功":"投資者創建成功"),k.push("/opportunities/investors")}catch{ae.error(h.value?"投資者更新失敗":"投資者創建失敗")}finally{I.value=!1}},L=()=>{E.value&&E.value.resetFields()},U=()=>{k.push("/opportunities/investors")};return me(()=>{B()}),(O,m)=>{const P=ue,V=ke,w=Re,b=Te,T=ze,x=Oe,F=$e,f=qe,z=pe;return $(),G("div",bs,[e(z,null,{header:t(()=>[l("div",ws,[l("h2",null,o(h.value?a(r)("investors.form.edit_title"):a(r)("investors.form.create_title")),1),e(P,{onClick:U},{default:t(()=>[p(o(a(r)("common.back")),1)]),_:1})])]),default:t(()=>[e(f,{ref_key:"formRef",ref:E,model:v,rules:N,"label-width":"120px",class:"investor-form"},{default:t(()=>[e(T,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:a(r)("investors.form.name"),prop:"name"},{default:t(()=>[e(V,{modelValue:v.name,"onUpdate:modelValue":m[0]||(m[0]=n=>v.name=n),placeholder:a(r)("investors.form.name_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:a(r)("investors.form.company"),prop:"company"},{default:t(()=>[e(V,{modelValue:v.company,"onUpdate:modelValue":m[1]||(m[1]=n=>v.company=n),placeholder:a(r)("investors.form.company_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:a(r)("investors.form.type"),prop:"type"},{default:t(()=>[e(F,{modelValue:v.type,"onUpdate:modelValue":m[2]||(m[2]=n=>v.type=n),placeholder:a(r)("investors.form.type_placeholder"),style:{width:"100%"}},{default:t(()=>[e(x,{label:"個人投資者",value:"individual"}),e(x,{label:"機構投資者",value:"institutional"}),e(x,{label:"風險投資",value:"venture_capital"}),e(x,{label:"私募股權",value:"private_equity"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:a(r)("investors.form.status"),prop:"status"},{default:t(()=>[e(F,{modelValue:v.status,"onUpdate:modelValue":m[3]||(m[3]=n=>v.status=n),placeholder:a(r)("investors.form.status_placeholder"),style:{width:"100%"}},{default:t(()=>[e(x,{label:"活躍",value:"active"}),e(x,{label:"潛在",value:"potential"}),e(x,{label:"暫停",value:"inactive"})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(T,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:"電子郵件",prop:"email"},{default:t(()=>[e(V,{modelValue:v.email,"onUpdate:modelValue":m[4]||(m[4]=n=>v.email=n),placeholder:"請輸入電子郵件",type:"email"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:"電話號碼",prop:"phone"},{default:t(()=>[e(V,{modelValue:v.phone,"onUpdate:modelValue":m[5]||(m[5]=n=>v.phone=n),placeholder:"請輸入電話號碼"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(T,{gutter:20},{default:t(()=>[e(b,{span:12},{default:t(()=>[e(w,{label:"最小投資金額",prop:"minInvestment"},{default:t(()=>[e(V,{modelValue:v.minInvestment,"onUpdate:modelValue":m[6]||(m[6]=n=>v.minInvestment=n),placeholder:"請輸入最小投資金額",type:"number"},{append:t(()=>[...m[12]||(m[12]=[p("萬元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(b,{span:12},{default:t(()=>[e(w,{label:"最大投資金額",prop:"maxInvestment"},{default:t(()=>[e(V,{modelValue:v.maxInvestment,"onUpdate:modelValue":m[7]||(m[7]=n=>v.maxInvestment=n),placeholder:"請輸入最大投資金額",type:"number"},{append:t(()=>[...m[13]||(m[13]=[p("萬元",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{label:"關注領域",prop:"focusAreas"},{default:t(()=>[e(F,{modelValue:v.focusAreas,"onUpdate:modelValue":m[8]||(m[8]=n=>v.focusAreas=n),multiple:"",placeholder:"請選擇關注領域",style:{width:"100%"}},{default:t(()=>[e(x,{label:"科技",value:"科技"}),e(x,{label:"醫療",value:"醫療"}),e(x,{label:"教育",value:"教育"}),e(x,{label:"金融",value:"金融"}),e(x,{label:"房地產",value:"房地產"}),e(x,{label:"製造業",value:"製造業"}),e(x,{label:"零售",value:"零售"}),e(x,{label:"能源",value:"能源"}),e(x,{label:"人工智能",value:"人工智能"}),e(x,{label:"區塊鏈",value:"區塊鏈"}),e(x,{label:"生物技術",value:"生物技術"}),e(x,{label:"環保",value:"環保"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"投資偏好",prop:"investmentPreferences"},{default:t(()=>[e(V,{modelValue:v.investmentPreferences,"onUpdate:modelValue":m[9]||(m[9]=n=>v.investmentPreferences=n),type:"textarea",rows:3,placeholder:"請描述投資偏好和標準"},null,8,["modelValue"])]),_:1}),e(w,{label:"聯繫地址",prop:"address"},{default:t(()=>[e(V,{modelValue:v.address,"onUpdate:modelValue":m[10]||(m[10]=n=>v.address=n),placeholder:"請輸入聯繫地址"},null,8,["modelValue"])]),_:1}),e(w,{label:"備註",prop:"notes"},{default:t(()=>[e(V,{modelValue:v.notes,"onUpdate:modelValue":m[11]||(m[11]=n=>v.notes=n),type:"textarea",rows:3,placeholder:"請輸入備註信息"},null,8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[(h.value?a(_)("investors"):a(A)("investors"))?($(),R(P,{key:0,type:"primary",loading:I.value,onClick:q},{default:t(()=>[p(" >"+o(h.value?a(r)("common.update"):a(r)("common.create")),1)]),_:1},8,["loading"])):H("",!0),e(P,{onClick:L},{default:t(()=>[p(o(a(r)("common.reset")),1)]),_:1}),e(P,{onClick:U},{default:t(()=>[p(o(a(r)("common.cancel")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),Vs=_e(Is,[["__scopeId","data-v-6d0458cd"]]),el=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),xs={class:"investors-detail-page"},Cs={class:"card-header"},ks={class:"header-actions"},$s={class:"investor-detail"},Os={key:1,class:"detail-content"},zs=["href"],Ts=["href"],Ss={class:"focus-areas"},Ps={class:"preferences-text"},Ds={class:"section-header"},Ms={class:"investment-info"},As={class:"investment-amount"},Us={class:"investment-stage"},Es={class:"notes-content"},Fs=ce({__name:"InvestorsDetailPage",setup(u){const c=Pe(),{t:r}=ye(),k=de(),{canEdit:A,canDelete:_}=he(),E=j(!0),I=j({id:"",name:"",company:"",type:"",status:"",email:"",phone:"",address:"",minInvestment:0,maxInvestment:0,focusAreas:[],investmentPreferences:"",notes:"",createdAt:"",investments:[]}),h=async()=>{try{E.value=!0;const b={id:c.params.id,name:"王大明",company:"明德投資集團",type:"institutional",status:"active",email:"wang@mingde.com",phone:"0912-345-678",address:"台北市信義區信義路五段7號",minInvestment:1e3,maxInvestment:1e4,focusAreas:["科技","醫療","教育"],investmentPreferences:"專注於早期科技公司，特別是人工智能和醫療科技領域。偏好有經驗團隊和清晰商業模式的項目。",notes:"長期合作夥伴，決策效率高，資金充足。",createdAt:"2024-01-15T10:30:00Z",investments:[{id:"1",projectName:"AI醫療診斷平台",amount:5e3,stage:"A輪",status:"進行中",date:"2024-03-01T00:00:00Z"},{id:"2",projectName:"智能教育系統",amount:3e3,stage:"種子輪",status:"已完成",date:"2024-01-15T00:00:00Z"},{id:"3",projectName:"區塊鏈金融平台",amount:8e3,stage:"B輪",status:"進行中",date:"2023-11-20T00:00:00Z"}]};I.value=b}catch{ae.error("載入投資者數據失敗")}finally{E.value=!1}},v=()=>{k.push(`/opportunities/investors/${I.value.id}/edit`)},N=async()=>{try{await Et.confirm("確定要刪除這個投資者嗎？此操作不可撤銷。","確認刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}),await new Promise(b=>setTimeout(b,1e3)),ae.success("投資者刪除成功"),k.push("/opportunities/investors")}catch(b){b!=="cancel"&&ae.error("投資者刪除失敗")}},B=()=>{k.push(`/opportunities/investors/${I.value.id}/investments`)},q=()=>{k.push("/opportunities/investors")},L=b=>new Date(b).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),U=b=>oe(b*1e4,{compact:!0}),O=b=>({individual:"success",institutional:"primary",venture_capital:"warning",private_equity:"danger"})[b]||"info",m=b=>({individual:"個人投資者",institutional:"機構投資者",venture_capital:"風險投資",private_equity:"私募股權"})[b]||b,P=b=>({active:"success",potential:"warning",inactive:"info"})[b]||"info",V=b=>({active:"活躍",potential:"潛在",inactive:"暫停"})[b]||b,w=b=>({進行中:"primary",已完成:"success",已取消:"danger"})[b]||"info";return me(()=>{h()}),(b,T)=>{const x=ue,F=ot,f=rt,z=Se,n=nt,s=pe,C=ut,y=it,D=Ne;return $(),G("div",xs,[e(s,null,{header:t(()=>[l("div",Cs,[l("h2",null,o(a(r)("investors.detail.title")),1),l("div",ks,[e(x,{onClick:q},{default:t(()=>[p(o(a(r)("common.back")),1)]),_:1}),a(A)("investors")?($(),R(x,{key:0,type:"primary",onClick:v},{default:t(()=>[p(o(a(r)("common.edit")),1)]),_:1})):H("",!0),a(_)("investors")?($(),R(x,{key:1,type:"danger",onClick:N},{default:t(()=>[p(o(a(r)("common.delete")),1)]),_:1})):H("",!0)])])]),default:t(()=>[Ve(($(),G("div",$s,[E.value?($(),R(F,{key:0,rows:8,animated:""})):($(),G("div",Os,[e(s,{class:"info-card",shadow:"never"},{header:t(()=>[l("h3",null,o(a(r)("investors.detail.basic_info")),1)]),default:t(()=>[e(n,{column:2,border:""},{default:t(()=>[e(f,{label:a(r)("investors.form.name")},{default:t(()=>[p(o(I.value.name),1)]),_:1},8,["label"]),e(f,{label:a(r)("investors.form.company")},{default:t(()=>[p(o(I.value.company),1)]),_:1},8,["label"]),e(f,{label:a(r)("investors.form.type")},{default:t(()=>[e(z,{type:O(I.value.type)},{default:t(()=>[p(o(m(I.value.type)),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(f,{label:a(r)("investors.form.status")},{default:t(()=>[e(z,{type:P(I.value.status)},{default:t(()=>[p(o(V(I.value.status)),1)]),_:1},8,["type"])]),_:1},8,["label"]),e(f,{label:a(r)("common.email")},{default:t(()=>[l("a",{href:`mailto:${I.value.email}`},o(I.value.email),9,zs)]),_:1},8,["label"]),e(f,{label:a(r)("common.phone")},{default:t(()=>[l("a",{href:`tel:${I.value.phone}`},o(I.value.phone),9,Ts)]),_:1},8,["label"]),e(f,{label:a(r)("common.address")},{default:t(()=>[p(o(I.value.address),1)]),_:1},8,["label"]),e(f,{label:a(r)("common.created_at")},{default:t(()=>[p(o(L(I.value.createdAt)),1)]),_:1},8,["label"])]),_:1})]),_:1}),e(s,{class:"info-card",shadow:"never"},{header:t(()=>[l("h3",null,o(a(r)("investors.detail.invest_info")),1)]),default:t(()=>[e(n,{column:2,border:""},{default:t(()=>[e(f,{label:a(r)("investors.detail.min_investment")},{default:t(()=>[p(o(U(I.value.minInvestment)),1)]),_:1},8,["label"]),e(f,{label:a(r)("investors.detail.max_investment")},{default:t(()=>[p(o(U(I.value.maxInvestment)),1)]),_:1},8,["label"]),e(f,{label:a(r)("investors.detail.focus_areas"),span:2},{default:t(()=>[l("div",Ss,[($(!0),G(xe,null,Ce(I.value.focusAreas,M=>($(),R(z,{key:M,class:"area-tag"},{default:t(()=>[p(o(M),1)]),_:2},1024))),128))])]),_:1},8,["label"]),e(f,{label:"投資偏好",span:2},{default:t(()=>[l("div",Ps,o(I.value.investmentPreferences),1)]),_:1})]),_:1})]),_:1}),e(s,{class:"info-card",shadow:"never"},{header:t(()=>[l("div",Ds,[l("h3",null,o(a(r)("investors.detail.history")),1),e(x,{size:"small",onClick:B},{default:t(()=>[p(o(a(r)("investors.detail.view_all")),1)]),_:1})])]),default:t(()=>[e(y,null,{default:t(()=>[($(!0),G(xe,null,Ce(I.value.investments,M=>($(),R(C,{key:M.id,timestamp:L(M.date),placement:"top"},{default:t(()=>[e(s,{class:"investment-card",shadow:"hover"},{default:t(()=>[l("div",Ms,[l("h4",null,o(M.projectName),1),l("p",As,o(a(r)("investors.detail.amount"))+"："+o(U(M.amount)),1),l("p",Us,o(a(r)("investors.detail.stage"))+"："+o(M.stage),1),e(z,{type:w(M.status),size:"small"},{default:t(()=>[p(o(M.status),1)]),_:2},1032,["type"])])]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})]),_:1}),I.value.notes?($(),R(s,{key:0,class:"info-card",shadow:"never"},{header:t(()=>[l("h3",null,o(a(r)("investors.detail.notes")),1)]),default:t(()=>[l("div",Es,o(I.value.notes),1)]),_:1})):H("",!0)]))])),[[D,E.value]])]),_:1})])}}}),Ls=_e(Fs,[["__scopeId","data-v-5ee6784e"]]),tl=Object.freeze(Object.defineProperty({__proto__:null,default:Ls},Symbol.toStringTag,{value:"Module"}));export{Ks as I,Js as O,Qs as a,Xs as b,el as c,tl as d};
